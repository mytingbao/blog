---
layout: post
title: 2022年7月的技术笔记
date: 2022-07-22 08:09:50 +0800
img: 20.jpg
tags: [技术杂谈, '2022']
author: fangfang
description: 2022年7月的技术笔记
---

我个人在7月份的笔记，不定期更新

# typescript - 找不到参数类型为“字符串”的索引签名

个人习惯用策略模式去优化多个if/switch case的代码，
```typescript
 getTitle(name: any) {
    const mapping={
      ApproveList: '签署审批',
      signRecord: '签署记录',
    }
    return mapping[name]
  }
```
但在ts下你可能会得到以下报错：

{% highlight javascript %}
const mapping: {
    ApproveList: '签署审批',
    signRecord: '签署记录',
}
Element implicitly has an 'any' type because expression of type 'any' can't be used to index type '{ ApproveList: string; signRecord: string; }'.ts(7053)
{% endhighlight %}

原因是ts并不知道你传入的string索引，是否在对象中有对应的成员属性

知道问题了，我们就可以对应的解决方法：
1. 声明一个类型。限制构成对象属性的字符串
2. 以这个类型作为key，生成策略匹配的对象
3. 以这个type类型作为函数参数

```typescript
type RouteNames = 'ApproveList' | 'signRecord'

getTitle(name: RouteNames) {
    const mapping: Record<RouteNames, string> = {
      ApproveList: '签署审批',
      signRecord: '签署记录',
  
    }
    return mapping[name]
  }

this.title = this.getTitle(routeName as RouteNames) || ''
```
